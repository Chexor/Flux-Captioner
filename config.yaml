# ================================================
# Flux-Captioner — OFFICIAL WORKING config.yaml
# Fixed for YAML syntax
# ================================================

default_dataset: "/srv/ai/projects/flux-lora/datasets"
model: "joycaption-beta-one"
ollama_url: "http://localhost:11434/api/generate"

instructions:
  explicit:
    non_closeup: |
      Type: Training Prompt
      Length: Medium
      Style: Professional fashion nude
      Include: pose, lighting, background, skin texture, body hair, cinematic

      photo of {{tag}},
    closeup: |
      Type: Descriptive (Casual)
      Length: Medium
      Style: Macro erotic photography
      Focus: extreme close-up of genitals/breasts/nipples/anus

      close-up of {{tag}},

  safe:
    non_closeup: |
      Type: Descriptive
      Length: Short
      Style: Fashion editorial, fully clothed

      photo of {{tag}} wearing
    closeup: "close-up of {{tag}} wearing "

temperature: 0.35
top_p: 0.9
max_words: 90

# ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←
# FIX: Proper YAML lists (one item per line)
# ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←
stop_tokens:
  - "<|eot_id|>"
  - "<|end_of_text|>"
  - "\n\n"
  - "--"
  - "#"
  - "Tags:"
  - "```"
  - "import "
  - "Training Prompt"
  - "watermark"
  - "signature"

closeup_keywords:
  - closeup
  - crop
  - detail
  - macro
  - breast
  - nipple
  - areola
  - pussy
  - vulva
  - labia
  - clit
  - cock
  - dick
  - penis
  - balls
  - anus
  - asshole
  - genital
  - crotch
  - spread
  - close-up

post_processing:
  lowercase_tag: False
  force_comma_after_tag: true
  remove_quotes: true
  final_clean:
    - "'' in bottom left corner"
    - "'' on the left side"
    - "'' left side"
    - "'' vertically along"
    - "reads \"xena_lobert\""
    - "signature \"xena_lobert\""
    - "of image"
    - "with \""
    - "watermark"
    - "©"
    - "©xena_lobert"
    - "masterpiece"
    - "best quality"
    - "highly detailed"
    - "8k"
    - "ultra-detailed"
    - "absurdres"
    - "in the style of"
    - "\\.\\.\\.$"
    - "\\?$"
    - "\\s+--.*$"
    - "\\s+#.*$"
    - "\\s+\\|\\s+.*$"